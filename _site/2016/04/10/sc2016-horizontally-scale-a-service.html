<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mini-project: Horizontally scale a web service using Docker</title>
    <meta name="author" content="Will Price">
    <meta name="description" content="">
    <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/skeleton.css">
    <link rel="stylesheet" href="/css/pygments.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Slab">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/user.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="/scripts/toc.js"></script>
    <script src="/scripts/ganalytics.js"></script>
    
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/">Posts</a>
        <!-- Notes need more cleaning up before being visible for
             browsing!
        <a class="extra" href="/notes">Notes</a>
        -->
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>
      <section>
        <div class="content">
    <div id="post">
        <h1>Mini-project: Horizontally scale a web service using Docker</h1>
        
        <p><em>Estimated Duration:</em> 2 hours</p>

<p><em>Author:</em> Will Price, Codemanship</p>

<p><em>Language(s)/stacks:</em> Any, Docker</p>

<p><em>Goal:</em> Produce a simple web service that is easily overwhelmed by multiple
concurrent requests.  To handle more concurrent users run multiple instances of
the service behind a reverse proxy to abstract away which instance you are
querying. Dynamically scale the number of instances of the service whilst
updating the reverse proxy configuration.</p>

<h2 id="summary">Summary:</h2>

<p>Create a web service in your favourite language with the following end point
GET <code class="highlighter-rouge">/is_prime/&lt;integer&gt;</code> that responds with the JSON: 
{ “integer”: 1234, “is_prime”: false }</p>

<p>Do this using the square root search method: iterate a candidate factor variable
up to the square root of the integer, for each number checking whether the
remainder of the integer divided by the candidate factor is zero (if it is, then
it is a factor), this has the worst case complexity O(\sqrt(n)) which is useful
to demonstrate how you can increase request capacity by running multiple
concurrent services.</p>

<ul>
  <li>Dockerise your web service</li>
  <li>Run multiple instances of your web service and manually configure a reverse
proxy to allocate requests using <a href="https://en.wikipedia.org/wiki/Round-robin_scheduling">round robin</a> scheduling.</li>
  <li>Dynamically configure the reverse proxy based on the running containers using
<a href="https://github.com/jwilder/nginx-proxy">nginx-proxy</a></li>
</ul>

<h2 id="continuous-integration-extension">Continuous Integration Extension:</h2>

<ul>
  <li>Build a container on each commit to your git repository using travis, jenkins,
your favourite CI server.</li>
  <li>On a successful image build, push that image to the docker registry from your
CI server.</li>
  <li>Set up docker hub web hooks to deploy an instance of your server to a host
such as heroku, AWS, digital ocean, etc.</li>
  <li>Instead of using nginx-proxy, implement the dynamic upstream configuration on
apache using <a href="https://github.com/jwilder/docker-gen">docker-gen</a> (the
application that nginx-proxy utilises for dynamic configuration)</li>
</ul>

<h2 id="example">Example</h2>
<p>See my own attempt on <a href="https://github.com/willprice/horizontally-scaling-webservices-using-docker">github</a></p>

    </div>
</div>

      </section>
    </div>

    <script type="text/javascript">
      $(document).ready(function() {
        $('.toc').toc();
      });
    </script>
  </body>
</html>
