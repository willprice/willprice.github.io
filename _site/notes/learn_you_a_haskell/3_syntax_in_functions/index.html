<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
  <title>Syntax in Functions</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="author" content="Will Price" />
  <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="/css/base.css">
	<link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/layout.css">
	<link rel="stylesheet" href="/css/user.css">
	<link rel="stylesheet" href="/css/pygments.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

  <! -- SCRIPTS
  ================================================== -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script type="text/javascript" src="/scripts/toc.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41410283-1', 'willprice.org');
    ga('send', 'pageview');
  </script>
  


	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<div class="container">
		<div class="sixteen columns">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/posts.html">Posts</a>
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>

      <section>
      <h1 id="pattern-matching">Pattern Matching</h1>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">factorial</span> <span class="o">::</span> <span class="kt">Int</span> <span class="o">-&gt;</span> <span class="kt">Int</span>
  <span class="n">factorial</span> <span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">factorial</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></code></pre></figure>

<p>All cases must be covered, using a placeholder at the end of the function definition will cover all other possible
cases. Cases are checked from top to bottom of function definition, so the wildcard entry should be at the bottom.</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">charName</span> <span class="o">::</span> <span class="kt">Char</span> <span class="o">-&gt;</span> <span class="kt">String</span>
  <span class="n">charName</span> <span class="sc">'a'</span> <span class="o">=</span> <span class="s">"Albert"</span>
  <span class="n">charName</span> <span class="sc">'b'</span> <span class="o">=</span> <span class="s">"Billy"</span>
  <span class="c1">-- x acts as a universal matcher and will match anything</span>
  <span class="n">charName</span> <span class="n">x</span> <span class="o">=</span> <span class="s">"Sorry, I don't know what that is"</span></code></pre></figure>

<p>This wildcard matching pattern works very well as you can define functions very cleanly:</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">addVectors</span> <span class="o">::</span> <span class="p">(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)</span>
  <span class="n">addVectors</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">)</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="o">+</span><span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="o">+</span><span class="n">y2</span><span class="p">)</span></code></pre></figure>

<p><code class="highlighter-rouge">_</code> represents a generic variable in function definitions, something that we don’t care about.</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">head'</span> <span class="o">::</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">a</span>
  <span class="n">head'</span> <span class="kt">[]</span> <span class="o">=</span> <span class="ne">error</span> <span class="s">"Can't call head' on an empty list"</span>
  <span class="n">head'</span> <span class="p">(</span> <span class="n">x</span><span class="o">:</span> <span class="kr">_</span> <span class="p">)</span> <span class="o">=</span> <span class="n">x</span> <span class="c1">-- there should be no spaces between the x and underscore, this is to fix md rendering</span></code></pre></figure>

<p><code class="highlighter-rouge">++</code> is used for concatenation of lists</p>

<h1 id="as-patterns">As Patterns</h1>
<p>As patterns allow you to refence a whole list easily when you’ve broken it down into constituent elements in a function
definition. Syntax: <code class="highlighter-rouge">name@(list)</code>, name is used to refer to the <code class="highlighter-rouge">list</code>, and <code class="highlighter-rouge">list</code> is usually written like <code class="highlighter-rouge">x:y:xs</code>, allowing
easy access to the first and second items of the list.</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">firstLetter</span> <span class="o">::</span> <span class="kt">String</span> <span class="o">-&gt;</span> <span class="kt">String</span>
  <span class="n">firstLetter</span> <span class="s">""</span> <span class="o">=</span> <span class="s">"Empty string, whoops!"</span> <span class="c1">-- Match any empty strings</span>
  <span class="n">firstLetter</span> <span class="n">all</span><span class="o">@</span><span class="p">(</span><span class="n">x</span><span class="o">:</span><span class="n">xs</span><span class="p">)</span> <span class="o">=</span> <span class="s">"The first letter of "</span> <span class="o">++</span> <span class="n">all</span> <span class="o">++</span> <span class="s">" is "</span> <span class="o">++</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span></code></pre></figure>

<h1 id="guards">Guards</h1>
<p>Guards are used for checking whether parameters satsify some predicate, they’re like having a whole load of if and else
statements, just must much prettier, <code class="highlighter-rouge">|</code> marks the start of a guard, <code class="highlighter-rouge">\n</code> ends it:</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">bmiTell</span> <span class="o">::</span> <span class="kt">Double</span> <span class="o">-&gt;</span> <span class="kt">String</span>
  <span class="n">bmiTell</span> <span class="n">bmi</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="mf">18.5</span> <span class="o">=</span> <span class="s">"You're underweight"</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&gt;=</span> <span class="mf">30.0</span> <span class="o">=</span> <span class="s">"You're fat"</span>
    <span class="o">|</span> <span class="n">otherwise</span> <span class="o">=</span> <span class="s">"You're intermediate"</span></code></pre></figure>

<p>Here <code class="highlighter-rouge">otherwise</code> is used (It’s a wildcard matcher) and will handle anything that doesn’t match the predicates above it.
Guards are evaluated like patterns, from top to bottom.</p>

<h1 id="storing-intermediate-results">Storing intermediate results</h1>
<p>## Where
In python you’d calc something once like: <code class="highlighter-rouge">x = x * 10.0/13.0</code>, then use x for all our further calculations. Haskell
doesn’t have variable, only functions, or only immutable variables, depending on how you want to think of it.</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">bmiTell</span> <span class="o">::</span> <span class="kt">Double</span> <span class="o">-&gt;</span> <span class="kt">Double</span> <span class="o">-&gt;</span> <span class="kt">String</span>
  <span class="n">bmiTell</span> <span class="n">weight</span> <span class="n">height</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="n">skinny</span> <span class="o">=</span> <span class="s">"You're underweight, you emo"</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="n">normal</span> <span class="o">=</span> <span class="s">"You're supposedly normal"</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="n">fat</span> <span class="o">=</span> <span class="s">"You're fat!"</span>
    <span class="o">|</span> <span class="n">otherwise</span> <span class="o">=</span> <span class="s">"Blimey, surgery needed ASAP"</span>
  <span class="kr">where</span> <span class="n">bmi</span> <span class="o">=</span> <span class="n">weight</span><span class="o">/</span><span class="n">height</span><span class="o">^</span><span class="mi">2</span>
        <span class="n">skinny</span> <span class="o">=</span> <span class="mf">18.5</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="mf">25.0</span>
        <span class="n">fat</span> <span class="o">=</span> <span class="mf">30.0</span></code></pre></figure>

<p>It’s very simple really, don’t overcomplicate it in your head. Just make sure all vars are located in same column like above.
The vars lexical scope is the function.</p>

<h2 id="let-expressions">Let expressions</h2>
<p>let expressions are very local, they’re pretty much self-contained: <code class="highlighter-rouge">let &lt;bindings&gt; in &lt;expression&gt;</code>, they can be used anywhere
other expressions can be used. The use of <code class="highlighter-rouge">where</code> just binds values to names whereas <code class="highlighter-rouge">let</code> actually is an expression itself.</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">calcBmis</span> <span class="o">::</span> <span class="p">[(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Double</span><span class="p">]</span>
  <span class="n">calcBmis</span> <span class="n">xs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">bmi</span> <span class="o">|</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">xs</span><span class="p">,</span> <span class="kr">let</span> <span class="n">bmi</span> <span class="o">=</span> <span class="n">w</span> <span class="o">/</span> <span class="n">h</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">bmi</span> <span class="o">&gt;</span> <span class="mf">25.0</span><span class="p">]</span></code></pre></figure>

<h2 id="case-expressions">Case expressions</h2>
<p>case expressions follow the pattern:</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="kr">case</span> <span class="n">express</span> <span class="kr">of</span> <span class="n">pattern</span> <span class="o">-&gt;</span> <span class="n">result</span>
                  <span class="n">pattern</span> <span class="o">-&gt;</span> <span class="n">result</span>
                  <span class="n">pattern</span> <span class="o">-&gt;</span> <span class="n">result</span></code></pre></figure>

<p>A more concrete example:</p>

<figure class="highlight"><pre><code class="language-hs" data-lang="hs">  <span class="n">describeList</span> <span class="o">::</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="kt">String</span>
  <span class="n">describeList</span> <span class="n">ls</span> <span class="o">=</span> <span class="s">"The list is "</span> <span class="o">++</span> <span class="kr">case</span> <span class="n">ls</span> <span class="kr">of</span> <span class="kt">[]</span> <span class="o">-&gt;</span> <span class="s">"Empty."</span>
                                                 <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="s">"Singleton list"</span>
                                                 <span class="n">xs</span> <span class="o">-&gt;</span> <span class="s">"Long list."</span></code></pre></figure>


      </section>
    </div>
    <script type="text/javascript">
      $(document).ready(function() {
        $('.toc').toc();
      });
    </script>
  </div>
  <!-- container -->


<!-- End Document
================================================== -->
</body>
</html>
