<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
  <title>Syntax in Functions</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="author" content="Will Price" />
  <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="/css/base.css">
	<link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/layout.css">
	<link rel="stylesheet" href="/css/user.css">
	<link rel="stylesheet" href="/css/pygments.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

  <! -- SCRIPTS
  ================================================== -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41410283-1', 'willprice.org');
    ga('send', 'pageview');
  </script>
  


	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<div class="container">
		<div class="sixteen columns">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/posts.html">Posts</a>
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>

      <section>
      <h1 id="pattern-matching">Pattern Matching</h1>

<div class="highlight"><pre><code class="hs"><span class="nf">factorial</span> <span class="ow">::</span> <span class="kt">Int</span> <span class="ow">-&gt;</span> <span class="kt">Int</span>
  <span class="n">factorial</span> <span class="mi">1</span> <span class="ow">=</span> <span class="mi">1</span>
  <span class="n">factorial</span> <span class="n">n</span> <span class="ow">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></code></pre></div>

<p>All cases must be covered, using a placeholder at the end of the function definition will cover all other possible
cases. Cases are checked from top to bottom of function definition, so the wildcard entry should be at the bottom.</p>

<div class="highlight"><pre><code class="hs"><span class="nf">charName</span> <span class="ow">::</span> <span class="kt">Char</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
  <span class="n">charName</span> <span class="n">&#39;a&#39;</span> <span class="ow">=</span> <span class="s">&quot;Albert&quot;</span>
  <span class="n">charName</span> <span class="n">&#39;b&#39;</span> <span class="ow">=</span> <span class="s">&quot;Billy&quot;</span>
  <span class="c1">-- x acts as a universal matcher and will match anything</span>
  <span class="n">charName</span> <span class="n">x</span> <span class="ow">=</span> <span class="s">&quot;Sorry, I don&#39;t know what that is&quot;</span></code></pre></div>

<p>This wildcard matching pattern works very well as you can define functions very cleanly:</p>

<div class="highlight"><pre><code class="hs"><span class="nf">addVectors</span> <span class="ow">::</span> <span class="p">(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)</span>
  <span class="n">addVectors</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">)</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span> <span class="ow">=</span> <span class="p">(</span><span class="n">x1</span><span class="o">+</span><span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="o">+</span><span class="n">y2</span><span class="p">)</span></code></pre></div>

<p><code>_</code> represents a generic variable in function definitions, something that we don&#39;t care about.</p>

<div class="highlight"><pre><code class="hs"><span class="nf">head&#39;</span> <span class="ow">::</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="n">a</span>
  <span class="n">head&#39;</span> <span class="kt">[]</span> <span class="ow">=</span> <span class="ne">error</span> <span class="s">&quot;Can&#39;t call head&#39; on an empty list&quot;</span>
  <span class="n">head&#39;</span> <span class="p">(</span> <span class="n">x</span><span class="kt">:</span> <span class="kr">_</span> <span class="p">)</span> <span class="ow">=</span> <span class="n">x</span> <span class="c1">-- there should be no spaces between the x and underscore, this is to fix md rendering</span></code></pre></div>

<p><code>++</code> is used for concatenation of lists</p>

<h1 id="as-patterns">As Patterns</h1>

<p>As patterns allow you to refence a whole list easily when you&#39;ve broken it down into constituent elements in a function
definition. Syntax: <code>name@(list)</code>, name is used to refer to the <code>list</code>, and <code>list</code> is usually written like <code>x:y:xs</code>, allowing
easy access to the first and second items of the list.</p>

<div class="highlight"><pre><code class="hs"><span class="nf">firstLetter</span> <span class="ow">::</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
  <span class="n">firstLetter</span> <span class="s">&quot;&quot;</span> <span class="ow">=</span> <span class="s">&quot;Empty string, whoops!&quot;</span> <span class="c1">-- Match any empty strings</span>
  <span class="n">firstLetter</span> <span class="n">all</span><span class="o">@</span><span class="p">(</span><span class="n">x</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span> <span class="ow">=</span> <span class="s">&quot;The first letter of &quot;</span> <span class="o">++</span> <span class="n">all</span> <span class="o">++</span> <span class="s">&quot; is &quot;</span> <span class="o">++</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span></code></pre></div>

<h1 id="guards">Guards</h1>

<p>Guards are used for checking whether parameters satsify some predicate, they&#39;re like having a whole load of if and else
statements, just must much prettier, <code>|</code> marks the start of a guard, <code>\n</code> ends it:</p>

<div class="highlight"><pre><code class="hs"><span class="nf">bmiTell</span> <span class="ow">::</span> <span class="kt">Double</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
  <span class="n">bmiTell</span> <span class="n">bmi</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="mf">18.5</span> <span class="ow">=</span> <span class="s">&quot;You&#39;re underweight&quot;</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&gt;=</span> <span class="mf">30.0</span> <span class="ow">=</span> <span class="s">&quot;You&#39;re fat&quot;</span>
    <span class="o">|</span> <span class="n">otherwise</span> <span class="ow">=</span> <span class="s">&quot;You&#39;re intermediate&quot;</span></code></pre></div>

<p>Here <code>otherwise</code> is used (It&#39;s a wildcard matcher) and will handle anything that doesn&#39;t match the predicates above it.
Guards are evaluated like patterns, from top to bottom.</p>

<h1 id="storing-intermediate-results">Storing intermediate results</h1>

<h2 id="where">Where</h2>

<p>In python you&#39;d calc something once like: <code>x = x * 10.0/13.0</code>, then use x for all our further calculations. Haskell
doesn&#39;t have variable, only functions, or only immutable variables, depending on how you want to think of it.</p>

<div class="highlight"><pre><code class="hs"><span class="nf">bmiTell</span> <span class="ow">::</span> <span class="kt">Double</span> <span class="ow">-&gt;</span> <span class="kt">Double</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
  <span class="n">bmiTell</span> <span class="n">weight</span> <span class="n">height</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="n">skinny</span> <span class="ow">=</span> <span class="s">&quot;You&#39;re underweight, you emo&quot;</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="n">normal</span> <span class="ow">=</span> <span class="s">&quot;You&#39;re supposedly normal&quot;</span>
    <span class="o">|</span> <span class="n">bmi</span> <span class="o">&lt;=</span> <span class="n">fat</span> <span class="ow">=</span> <span class="s">&quot;You&#39;re fat!&quot;</span>
    <span class="o">|</span> <span class="n">otherwise</span> <span class="ow">=</span> <span class="s">&quot;Blimey, surgery needed ASAP&quot;</span>
  <span class="kr">where</span> <span class="n">bmi</span> <span class="ow">=</span> <span class="n">weight</span><span class="o">/</span><span class="n">height</span><span class="o">^</span><span class="mi">2</span>
        <span class="n">skinny</span> <span class="ow">=</span> <span class="mf">18.5</span>
        <span class="n">normal</span> <span class="ow">=</span> <span class="mf">25.0</span>
        <span class="n">fat</span> <span class="ow">=</span> <span class="mf">30.0</span></code></pre></div>

<p>It&#39;s very simple really, don&#39;t overcomplicate it in your head. Just make sure all vars are located in same column like above.
The vars lexical scope is the function.</p>

<h2 id="let-expressions">Let expressions</h2>

<p>let expressions are very local, they&#39;re pretty much self-contained: <code>let &lt;bindings&gt; in &lt;expression&gt;</code>, they can be used anywhere
other expressions can be used. The use of <code>where</code> just binds values to names whereas <code>let</code> actually is an expression itself.</p>

<div class="highlight"><pre><code class="hs"><span class="nf">calcBmis</span> <span class="ow">::</span> <span class="p">[(</span><span class="kt">Double</span><span class="p">,</span> <span class="kt">Double</span><span class="p">)]</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="kt">Double</span><span class="p">]</span>
  <span class="n">calcBmis</span> <span class="n">xs</span> <span class="ow">=</span> <span class="p">[</span> <span class="n">bmi</span> <span class="o">|</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">)</span> <span class="ow">&lt;-</span> <span class="n">xs</span><span class="p">,</span> <span class="kr">let</span> <span class="n">bmi</span> <span class="ow">=</span> <span class="n">w</span> <span class="o">/</span> <span class="n">h</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">bmi</span> <span class="o">&gt;</span> <span class="mf">25.0</span><span class="p">]</span></code></pre></div>

<h2 id="case-expressions">Case expressions</h2>

<p>case expressions follow the pattern:</p>

<div class="highlight"><pre><code class="hs"><span class="kr">case</span> <span class="n">express</span> <span class="kr">of</span> <span class="n">pattern</span> <span class="ow">-&gt;</span> <span class="n">result</span>
                  <span class="n">pattern</span> <span class="ow">-&gt;</span> <span class="n">result</span>
                  <span class="n">pattern</span> <span class="ow">-&gt;</span> <span class="n">result</span></code></pre></div>

<p>A more concrete example:</p>

<div class="highlight"><pre><code class="hs"><span class="nf">describeList</span> <span class="ow">::</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
  <span class="n">describeList</span> <span class="n">ls</span> <span class="ow">=</span> <span class="s">&quot;The list is &quot;</span> <span class="o">++</span> <span class="kr">case</span> <span class="n">ls</span> <span class="kr">of</span> <span class="kt">[]</span> <span class="ow">-&gt;</span> <span class="s">&quot;Empty.&quot;</span>
                                                 <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="s">&quot;Singleton list&quot;</span>
                                                 <span class="n">xs</span> <span class="ow">-&gt;</span> <span class="s">&quot;Long list.&quot;</span></code></pre></div>

      </section>
    </div>
	</div><!-- container -->


<!-- End Document
================================================== -->
</body>
</html>
