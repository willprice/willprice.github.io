<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
  <title>ModuleSim user notes</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="author" content="Will Price" />
  <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="/css/base.css">
	<link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/layout.css">
	<link rel="stylesheet" href="/css/user.css">
	<link rel="stylesheet" href="/css/pygments.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

  <! -- SCRIPTS
  ================================================== -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script type="text/javascript" src="/scripts/toc.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41410283-1', 'willprice.org');
    ga('send', 'pageview');
  </script>
  


	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<div class="container">
		<div class="sixteen columns">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/posts.html">Posts</a>
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>

      <section>
      <ul>
<li><code>x</code>s indicate that the binary digit doesn&#39;t matter, it can be 1 or 0.</li>
<li><a href="module-sim-examples.modsim">Examples of components</a></li>
</ul>

<h1 id="split-merge">Split Merge</h1>

<table><thead>
<tr>
<th>xxDC</th>
<th></th>
<th></th>
<th>DCBA</th>
</tr>
</thead><tbody>
<tr>
<td><strong>xxxD</strong></td>
<td><strong>xxDC</strong></td>
<td><strong>xxxB</strong></td>
<td><strong>xxBA</strong></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th><strong>xxBA</strong></th>
<th><strong>xxxB</strong></th>
<th><strong>xxDC</strong></th>
<th><strong>xxxD</strong></th>
</tr>
</thead><tbody>
<tr>
<td><strong>DCBA</strong></td>
<td></td>
<td></td>
<td><strong>xxDC</strong></td>
</tr>
</tbody></table>

<h2 id="merge-4-inputs">Merge (4 inputs)</h2>

<p><img src="img/merge.jpg" alt="Example merge image"></p>

<p>This example seems to demonstrate an error in the merge code. Decompiling 
yields some rather strange code that updates the outputs. Perhaps this is
undefined behaviour!? This is the problem of not having any official
documentation.</p>

<p>This is quite simple. Each of the 4 inputs represents a bit of a 4 bit word. A
is the LSB and D the MSB. The 4 bit word is constructed in output A.</p>

<p>Output B will only produce a word of the form <code>xxDC</code> or <code>xxC2C1</code> where <code>D</code> is the LSB of
input D; the same goes for input C.</p>

<h2 id="split-4-outputs">Split (4 outputs)</h2>

<p><img src="img/split.jpg" alt="Example split image"></p>

<p>Port A splits out each bit to the LSB of the output in order (A from port A -&gt; LSB of output
A), however it is not quite this simple as on output A and C the 2nd and 4th
bits from port A are also present in the 2nd LSB. so 00BA into Port A yields
00BA on output A. This is a bit irritating meaning you&#39;ll have to use a bit mask
to get at A, or perform a bit of shifting. Refer to the top table if this
explanation is crap.</p>

<h1 id="4-way-fanout">4 Way Fanout</h1>

<p><img src="img/fanout.jpg" alt="Example 4 way fanout image"></p>

<p>Takes an input and repeats it to four outputs</p>

<h1 id="reg-register">REG - Register</h1>

<p><img src="img/reg.jpg" alt="Example register image"></p>

<p>These store their inputs when enabled, and constantly output whatever is stored
in them. The control input takes the following form:</p>

<table><thead>
<tr>
<th>Bit</th>
<th>Function</th>
<th>Values and outputs</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>Clock</td>
<td>0 - no change, 1 - read input if enable=1</td>
</tr>
<tr>
<td>1</td>
<td>Reset</td>
<td>Reset the register to 0</td>
</tr>
<tr>
<td>2</td>
<td>Enable</td>
<td>0 - no change, 1 - read input if clock=1</td>
</tr>
</tbody></table>

<h1 id="clk-clock">CLK - Clock</h1>

<p><img src="img/clock.jpg" alt="Example clock image"></p>

<p>Outputs two clock signals which are the inverse of each other, advancing through
four phases as shown in the table below. The clock is also the source of the
asynchronous reset signal for any registers in your design</p>

<table><thead>
<tr>
<th>Bit</th>
<th>Output 1</th>
<th>Output 2</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>

<ul>
<li><em>NB 1: Sends a 1 when reset is pressed</em></li>
<li>NB 2: The enable bit <strong>defaults to 1 if left disconnected</strong>.
Because the third clock bit is an &#39;x&#39; this is fine when connected directly to
the clock. Connecting the clock to a register via a component that always drives
either 1 or 0 (such as a fan out) <em>without manually adding in an enable
signal</em> will result in the clock being permanently disabled.</li>
</ul>

<h1 id="lsh-left-shift">LSH - Left Shift</h1>

<p><img src="img/left_shift.jpg" alt="Example left shift image"></p>

<p>NOTE: Only the 2 LSBs of <em>control input</em> are handled</p>

<p>Take and input and shift it left by the number of places in the <em>control input</em>. No
idea what the chain in and outs do. If you do know, please email me and I&#39;ll add
it in.</p>

<h1 id="rsh-right-shift">RSH - Right Shift</h1>

<p><img src="img/right_shift.jpg" alt="Example right shift image"></p>

<p>NOTE: Only the 2 LSBs of <em>control input</em> are handled</p>

<p>Take the input and shift it right by the number of places in the <em>control
input</em>. No idea what the chain in and outs do.</p>

<h1 id="mux-multiplexer">MUX - Multiplexer</h1>

<p><img src="img/mux.jpg" alt="Example mux image"></p>

<p>The multiplexer takes 4 inputs and selects one of them based on the 2 LSBs of
the <em>Control in</em>, which is also fed out to <em>Control out</em>.</p>

<table><thead>
<tr>
<th>Control input</th>
<th>Input selected</th>
</tr>
</thead><tbody>
<tr>
<td>xx00</td>
<td>A</td>
</tr>
<tr>
<td>xx01</td>
<td>B</td>
</tr>
<tr>
<td>xx10</td>
<td>C</td>
</tr>
<tr>
<td>xx11</td>
<td>D</td>
</tr>
</tbody></table>

<h1 id="dmx-demultiplexer">DMX - Demultiplexer</h1>

<p><img src="img/demux.jpg" alt="Example demux image"></p>

<p>The demultiplexer takes an input and then based on the <em>Control input</em> selects
which output to route it to.</p>

<table><thead>
<tr>
<th>Control input</th>
<th>Output selected</th>
</tr>
</thead><tbody>
<tr>
<td>xx00</td>
<td>A</td>
</tr>
<tr>
<td>xx01</td>
<td>B</td>
</tr>
<tr>
<td>xx10</td>
<td>C</td>
</tr>
<tr>
<td>xx11</td>
<td>D</td>
</tr>
</tbody></table>

<h1 id="chained-or">Chained Or</h1>

<p><img src="img/or_on.png" alt="Example Or on image">
<img src="img/or_off.png" alt="Example Or off image"></p>

<p>The chained Or is triggered in one of two ways:
1. If the control in has it&#39;s LSB set
2. If any of the inputs have their LSB set
otherwise the output will be 0000.</p>

<p>The chained or is so called as along the top of the module you get the inputs
just as you fed them in, this means you can pass the lowest bits around quite a
lot.</p>

<h1 id="au-arithmetic-unit">AU - Arithmetic Unit</h1>

<p><img src="img/au.jpg" alt="Example au image"></p>

<p>Performs arithmetic operations on two inputs.</p>

<table><thead>
<tr>
<th>Control Inputs (right input)</th>
<th>Function selected</th>
<th>Comparison selected</th>
</tr>
</thead><tbody>
<tr>
<td>x000</td>
<td>Addition</td>
<td>Output = 0</td>
</tr>
<tr>
<td>x001</td>
<td>Pass through A</td>
<td>Output = 0</td>
</tr>
<tr>
<td>x110</td>
<td>A - B</td>
<td>A = B</td>
</tr>
<tr>
<td>x111</td>
<td>A - B</td>
<td>A &lt; B</td>
</tr>
</tbody></table>

<p>Subtraction is carried out by performing <code>(A + ¬B) + 1</code> since <code>-B = ¬B + 1</code> in
the two&#39;s complement system.</p>

<p>The left output is the <em>Control out</em> that instructs another chained AU that
overflow has occured so you can chain AUs to handle more than 4 bit numbers.</p>

<h1 id="lu-logic-unit">LU - Logic Unit</h1>

<p><img src="img/lu.jpg" alt="Example lu image"></p>

<p>Performs logical operations on two inputs.</p>

<table><thead>
<tr>
<th>Control input</th>
<th>Function selected</th>
</tr>
</thead><tbody>
<tr>
<td>xx00</td>
<td>Not</td>
</tr>
<tr>
<td>xx01</td>
<td>And</td>
</tr>
<tr>
<td>xx10</td>
<td>Or</td>
</tr>
<tr>
<td>xx11</td>
<td>Xor</td>
</tr>
</tbody></table>

<h1 id="ram-memory-unit">RAM - Memory unit</h1>

<p>The RAM unit holds 65,536 bytes of memory. These are accessed through the 4
<em>Address inputs</em> that take a nibble each. Inputs take the form of nibbles;
the same goes for outputs. </p>

<table><thead>
<tr>
<th>Bit</th>
<th>Function</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>Clock</td>
</tr>
<tr>
<td>2</td>
<td>Enable</td>
</tr>
</tbody></table>

<p><img src="img/ram.jpg" alt="Example RAM image"></p>

      </section>
    </div>
    <script type="text/javascript">
      $(document).ready(function() {
        $('.toc').toc();
      });
    </script>
  </div>
  <!-- container -->


<!-- End Document
================================================== -->
</body>
</html>
