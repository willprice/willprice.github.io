<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Structured Program Development</title>
    <meta name="author" content="Will Price">
    <meta name="description" content="">
    <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/skeleton.css">
    <link rel="stylesheet" href="/css/pygments.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Slab">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/user.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="/scripts/toc.js"></script>
    <script src="/scripts/ganalytics.js"></script>
    
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/">Posts</a>
        <!-- Notes need more cleaning up before being visible for
             browsing!
        <a class="extra" href="/notes">Notes</a>
        -->
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>
      <section>
        <p>All programs can be expressed in terms of 3 <em>control structures</em>, namely:</p>
<ul>
  <li>sequence structure (excecution in sequential order)</li>
  <li>selection structure (if, if/else, switch)</li>
  <li>repetition structure (while, for)
    <h1 id="flowcharting">Flowcharting</h1>
  </li>
  <li>Rectangle : action symbol : computation, IO</li>
  <li>Oval : <code class="highlighter-rouge">begin</code>, <code class="highlighter-rouge">end</code> to mark start/end program excecution.</li>
  <li>Diamond : conditional symbol : if, if/else, switch</li>
</ul>

<h1 id="selection-structure">Selection structure</h1>
<ul>
  <li>if : single-selection</li>
  <li>if/else : double-selection</li>
  <li>
    <p>switch : multiple-selection</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">?:</code> : conditional operator : <code class="highlighter-rouge">printf("%s\n", grade &gt;= 60 ? "Passed" : Failed");</code>
        <code class="highlighter-rouge">&lt;conditional statement&gt; ? &lt;code block if true&gt; : &lt;code block if false&gt;</code></p>
  </li>
  <li>Unitialized variables contain garbage data (still the case?)</li>
  <li><code class="highlighter-rouge">;</code> : empty statement.</li>
</ul>

<h1 id="repetition-structures">Repetition structures:</h1>
<h2 id="count-controlled-repetition">Count-Controlled repetition</h2>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">total</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">average</span><span class="p">;</span>

  <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="n">counter</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
  
    <span class="n">printf</span><span class="p">(</span><span class="s">"Enter grade: "</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">grade</span><span class="p">);</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="n">grade</span><span class="p">;</span>
    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="n">average</span> <span class="o">=</span> <span class="n">total</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"Class average is %d/n"</span><span class="p">,</span> <span class="n">average</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h2 id="sentinel-controlled-repetition">Sentinel-Controlled repetition</h2>
<h3 id="top-down-stepwise-refinement">Top-down, stepwise refinement</h3>
<ol>
  <li>Determine class average for the quiz</li>
  <li>
    <ul>
      <li>initialize vars</li>
      <li>input, sum and count the quiz grades</li>
      <li>calculate the average of the quiz grades, and print</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>intialize total to zero, counter to zero</li>
      <li>input the first grade</li>
      <li>while the user has not get entered the sentinel:
        <ul>
          <li>add this grade into the running total</li>
          <li>Add one to the grade counter</li>
          <li>input the next grade or sentinel</li>
        </ul>
      </li>
      <li>if counter is not equal to zero:
        <ul>
          <li>set average to total divided by counter</li>
          <li>print average</li>
        </ul>
      </li>
      <li>else:
        <ul>
          <li>print “no grades were entered”</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Now at a sufficiently high level of detail/low level of abstraction, rewrite in C.</li>
</ol>

<figure class="highlight"><pre><code class="language-c" data-lang="c">  <span class="cm">/*  Class average written using a top-down approach
      with sentinel-controlled reptition */</span>

  <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">average</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">counter</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">total</span><span class="p">;</span>

    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"Enter grade, -1 to end: "</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">grade</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">grade</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">total</span> <span class="o">+=</span> <span class="n">grade</span><span class="p">;</span>
      <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">printf</span><span class="p">(</span><span class="s">"Enter grade, -1 to end: "</span><span class="p">);</span>
      <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">grade</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">counter</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">average</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="n">total</span><span class="o">/</span><span class="n">counter</span><span class="p">;</span>
      <span class="n">printf</span><span class="p">(</span><span class="s">"Class average is %.2f"</span><span class="p">,</span> <span class="n">average</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">printf</span><span class="p">(</span><span class="s">"No grades were entered</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Here we used (float) to <em>cast</em> <code class="highlighter-rouge">total</code> from an <code class="highlighter-rouge">int</code> to a <code class="highlighter-rouge">float</code>, allowing for floating point division.</p>
<ul>
  <li><code class="highlighter-rouge">(float)</code> is the <em>unary cast operator</em>, this creates a floating point copy of it’s argument for use in whatever calculation is being performed.</li>
  <li>When float/int, int is promoted to a float (implicit conversion/promotion) so that the calculation can take place.</li>
  <li><code class="highlighter-rouge">%.2f</code> : print floating point number to 2 d.</li>
  <li><code class="highlighter-rouge">a++</code> : postincrement : will use the current value of a in the expression, then increment a by one.</li>
  <li><code class="highlighter-rouge">++a</code> : preincrement : will increment a, then use the new value of a in the expression</li>
  <li><code class="highlighter-rouge">a++</code> == <code class="highlighter-rouge">++a</code> when executed as an individual statement.</li>
  <li>casts, increments have second highest precedence (first being parentheses)</li>
</ul>


      </section>
    </div>

    <script type="text/javascript">
      $(document).ready(function() {
        $('.toc').toc();
      });
    </script>
  </body>
</html>
