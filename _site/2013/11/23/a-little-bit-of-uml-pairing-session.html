<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A little bit of UML pairing session</title>
    <meta name="author" content="Will Price">
    <meta name="description" content="">
    <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/skeleton.css">
    <link rel="stylesheet" href="/css/pygments.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Slab">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/user.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="/scripts/toc.js"></script>
    <script src="/scripts/ganalytics.js"></script>
    
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/">Posts</a>
        <!-- Notes need more cleaning up before being visible for
             browsing!
        <a class="extra" href="/notes">Notes</a>
        -->
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>
      <section>
        <div class="content">
    <div id="post">
        <h1>A little bit of UML pairing session</h1>
        
        <p>Jason’s video on the subject:</p>
<iframe width="560" height="315" src="//www.youtube.com/embed/U7X6EswilYc"></iframe>
<p><a href="http://www.codemanship.co.uk/files/littleuml.pdf">Slide source</a></p>

<p>Jason and I went through the slides discussing OO design as we went. After
looking at the user cases, acceptance tests and CRC cards, we started writing an
implementation of the software.</p>

<h2 id="tests">Tests</h2>
<p>This is as far as we got:</p>

<ol>
  <li>add a new title</li>
  <li>donating a copy of a title that isn’t in the library add the title to the
library</li>
  <li>donating a copy of a different title that isn’t in the library adds the title
to the library</li>
  <li>finding a title that doesn’t exist in the library returns null.</li>
</ol>

<p>To satisfy <em>1</em> we mocked the title class and wrote a method <code class="highlighter-rouge">addToNewTitles</code> on
library to add that title to library. The assertion used a <code class="highlighter-rouge">getNewTitles</code> method
that returned a list of new titles. Initially we tried using arrays but lists
have a nicer set of methods such as <code class="highlighter-rouge">contains</code> that saved us the cost of writing
sorting and searching algorithms (that would also require us to implement quite
a bit of title). Satisfying <em>2</em> involved adding a title to the library, and then
returning the first element of the list holding our titles. The assertions we
were writing to check the title was correct were very horrible, lots of getters
on title–poor emergent design. Next week we’ll have a look at how to go from
our current implementation to something a little cleaner doing lots of
refactoring!</p>

<h1 id="librarytestsjava">LibraryTests.java</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">willprice</span><span class="o">.</span><span class="na">videolibrary</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.*;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Array</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">mockito</span><span class="o">.</span><span class="na">Mockito</span><span class="o">.*;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LibraryTests</span> <span class="o">{</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addNewTitle</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Title</span> <span class="n">expectedTitle</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">Title</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
		<span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
		<span class="n">library</span><span class="o">.</span><span class="na">addToNewTitles</span><span class="o">(</span><span class="n">expectedTitle</span><span class="o">);</span>
		<span class="n">assertTrue</span><span class="o">(</span><span class="n">library</span><span class="o">.</span><span class="na">getNewTitles</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">expectedTitle</span><span class="o">));</span>
	<span class="o">}</span>
	
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">donatingCopyOfTitleThatIsntInLibraryAddsTitleToLibrary</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
		<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"The Abyss"</span><span class="o">;</span>
		<span class="n">String</span> <span class="n">director</span> <span class="o">=</span> <span class="s">"James Cameron"</span><span class="o">;</span>
		<span class="n">String</span> <span class="n">yearOfRelease</span> <span class="o">=</span> <span class="s">"1989"</span><span class="o">;</span>
		<span class="n">library</span><span class="o">.</span><span class="na">donate</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">director</span><span class="o">,</span> <span class="n">yearOfRelease</span><span class="o">);</span>
		<span class="n">Title</span> <span class="n">titleFound</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="na">findTitle</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
		<span class="n">assertEquals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
		<span class="n">assertEquals</span><span class="o">(</span><span class="n">director</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getDirector</span><span class="o">());</span>
		<span class="n">assertEquals</span><span class="o">(</span><span class="n">yearOfRelease</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getYearOfRelease</span><span class="o">());</span>
	<span class="o">}</span>
	
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">donatingCopyOfOceansElevenThatIsntInLibraryAddsOceansElevenToLibrary</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
		<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"Oceans Eleven"</span><span class="o">;</span>
		<span class="n">String</span> <span class="n">director</span> <span class="o">=</span> <span class="s">"Steven Soderbergh"</span><span class="o">;</span>
		<span class="n">String</span> <span class="n">yearOfRelease</span> <span class="o">=</span> <span class="s">"2002"</span><span class="o">;</span>
		<span class="n">library</span><span class="o">.</span><span class="na">donate</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">director</span><span class="o">,</span> <span class="n">yearOfRelease</span><span class="o">);</span>
		<span class="n">Title</span> <span class="n">titleFound</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="na">findTitle</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
		<span class="n">assertEquals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
		<span class="n">assertEquals</span><span class="o">(</span><span class="n">director</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getDirector</span><span class="o">());</span>
		<span class="n">assertEquals</span><span class="o">(</span><span class="n">yearOfRelease</span> <span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getYearOfRelease</span><span class="o">());</span>
	<span class="o">}</span>
	
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">findingTitleThatDoesntExistInLibraryReturnsNull</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
		<span class="n">library</span><span class="o">.</span><span class="na">donate</span><span class="o">(</span><span class="s">"The Abyss"</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">""</span><span class="o">);</span>
		<span class="n">assertNull</span><span class="o">(</span><span class="n">library</span><span class="o">.</span><span class="na">findTitle</span><span class="o">(</span><span class="s">""</span><span class="o">));</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="libraryjava">Library.java</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">willprice</span><span class="o">.</span><span class="na">videolibrary</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.mockito.Matchers</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Library</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="n">newTitles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;();</span>
	<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="n">titles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;();</span>

	<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="nf">getNewTitles</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">newTitles</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addToNewTitles</span><span class="o">(</span><span class="n">Title</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">newTitles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="nf">getTitles</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">titles</span> <span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">donate</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">director</span><span class="o">,</span> <span class="n">String</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">titles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Title</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">director</span><span class="o">,</span> <span class="n">year</span><span class="o">));</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">Title</span> <span class="nf">findTitle</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="s">""</span><span class="o">)</span>
			<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
		<span class="k">return</span> <span class="n">titles</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<h1 id="titlejava">Title.java</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">willprice</span><span class="o">.</span><span class="na">videolibrary</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Title</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">director</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">year</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Title</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">director</span><span class="o">,</span> <span class="n">String</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">director</span> <span class="o">=</span> <span class="n">director</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getDirector</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">director</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getYearOfRelease</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">year</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<h1 id="the-homework-user-stories-acceptance-tests-and-crc-cards-for-an-interesting-problem">The Homework: User stories, Acceptance tests, and CRC cards for an interesting problem</h1>
<p>Jason wants me to have ago applying the principles that we covered in the
pairing session on a different example, so I have free reign over what I want to
do. I’m quite interested in writing an app that allows users to track how often
they indulge in their vices. In my case: alcohol, I’d like to cut down on my
consumption, but I’m not quite sure how much I’m drinking, having an app to
record this information would be very helpful. Graphing it would be even more
helpful to see whether I’m decreasing my intake or not.</p>


    </div>
</div>

      </section>
    </div>

    <script type="text/javascript">
      $(document).ready(function() {
        $('.toc').toc();
      });
    </script>
  </body>
</html>
