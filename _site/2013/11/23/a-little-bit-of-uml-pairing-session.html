<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
  <title>A little bit of UML pairing session</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="author" content="Will Price" />
  <link href="http://feeds.feedburner.com/willpriceblog" type="application/atom+xml" title="Will Price" rel="alternative"/>
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="/css/base.css">
	<link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/layout.css">
	<link rel="stylesheet" href="/css/user.css">
	<link rel="stylesheet" href="/css/pygments.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

  <! -- SCRIPTS
  ================================================== -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41410283-1', 'willprice.org');
    ga('send', 'pageview');
  </script>
  


	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<div class="container">
		<div class="sixteen columns">
      <div class="title">
        <a href="/">Will Price</a>
        <a class="extra" href="/posts.html">Posts</a>
        <a class="extra" href="/about.html">About</a>
        <hr />
      </div>

      <section>
      <div class="content">
    <div id="post">
        <h2>A little bit of UML pairing session</h2>
        <p>Jason's video on the subject:</p>

<iframe width="560" height="315" src="//www.youtube.com/embed/U7X6EswilYc"></iframe>


<p><a href="http://www.codemanship.co.uk/files/littleuml.pdf">Slide source</a></p>

<p>Jason and I went through the slides discussing OO design as we went. After
looking at the user cases, acceptance tests and CRC cards, we started writing an
implementation of the software.</p>

<h2>Tests</h2>

<p>This is as far as we got:</p>

<ol>
<li>add a new title</li>
<li>donating a copy of a title that isn't in the library add the title to the
library</li>
<li>donating a copy of a different title that isn't in the library adds the title
to the library</li>
<li>finding a title that doesn't exist in the library returns null.</li>
</ol>


<p>To satisfy <em>1</em> we mocked the title class and wrote a method <code>addToNewTitles</code> on
library to add that title to library. The assertion used a <code>getNewTitles</code> method
that returned a list of new titles. Initially we tried using arrays but lists
have a nicer set of methods such as <code>contains</code> that saved us the cost of writing
sorting and searching algorithms (that would also require us to implement quite
a bit of title). Satisfying <em>2</em> involved adding a title to the library, and then
returning the first element of the list holding our titles. The assertions we
were writing to check the title was correct were very horrible, lots of getters
on title--poor emergent design. Next week we'll have a look at how to go from
our current implementation to something a little cleaner doing lots of
refactoring!</p>

<h1>LibraryTests.java</h1>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">willprice</span><span class="o">.</span><span class="na">videolibrary</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.*;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Array</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">mockito</span><span class="o">.</span><span class="na">Mockito</span><span class="o">.*;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LibraryTests</span> <span class="o">{</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addNewTitle</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Title</span> <span class="n">expectedTitle</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">Title</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
        <span class="n">library</span><span class="o">.</span><span class="na">addToNewTitles</span><span class="o">(</span><span class="n">expectedTitle</span><span class="o">);</span>
        <span class="n">assertTrue</span><span class="o">(</span><span class="n">library</span><span class="o">.</span><span class="na">getNewTitles</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">expectedTitle</span><span class="o">));</span>
    <span class="o">}</span>
    
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">donatingCopyOfTitleThatIsntInLibraryAddsTitleToLibrary</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;The Abyss&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">director</span> <span class="o">=</span> <span class="s">&quot;James Cameron&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">yearOfRelease</span> <span class="o">=</span> <span class="s">&quot;1989&quot;</span><span class="o">;</span>
        <span class="n">library</span><span class="o">.</span><span class="na">donate</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">director</span><span class="o">,</span> <span class="n">yearOfRelease</span><span class="o">);</span>
        <span class="n">Title</span> <span class="n">titleFound</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="na">findTitle</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">director</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getDirector</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">yearOfRelease</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getYearOfRelease</span><span class="o">());</span>
    <span class="o">}</span>
    
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">donatingCopyOfOceansElevenThatIsntInLibraryAddsOceansElevenToLibrary</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Oceans Eleven&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">director</span> <span class="o">=</span> <span class="s">&quot;Steven Soderbergh&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">yearOfRelease</span> <span class="o">=</span> <span class="s">&quot;2002&quot;</span><span class="o">;</span>
        <span class="n">library</span><span class="o">.</span><span class="na">donate</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">director</span><span class="o">,</span> <span class="n">yearOfRelease</span><span class="o">);</span>
        <span class="n">Title</span> <span class="n">titleFound</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="na">findTitle</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">director</span><span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getDirector</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">yearOfRelease</span> <span class="o">,</span> <span class="n">titleFound</span><span class="o">.</span><span class="na">getYearOfRelease</span><span class="o">());</span>
    <span class="o">}</span>
    
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findingTitleThatDoesntExistInLibraryReturnsNull</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">Library</span> <span class="n">library</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Library</span><span class="o">();</span>
        <span class="n">library</span><span class="o">.</span><span class="na">donate</span><span class="o">(</span><span class="s">&quot;The Abyss&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span>
        <span class="n">assertNull</span><span class="o">(</span><span class="n">library</span><span class="o">.</span><span class="na">findTitle</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>


<h1>Library.java</h1>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">willprice</span><span class="o">.</span><span class="na">videolibrary</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.mockito.Matchers</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Library</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="n">newTitles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;();</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="n">titles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;();</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="nf">getNewTitles</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">newTitles</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addToNewTitles</span><span class="o">(</span><span class="n">Title</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">newTitles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Title</span><span class="o">&gt;</span> <span class="nf">getTitles</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">titles</span> <span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">donate</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">director</span><span class="o">,</span> <span class="n">String</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">titles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Title</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">director</span><span class="o">,</span> <span class="n">year</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Title</span> <span class="nf">findTitle</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">titles</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div>


<h1>Title.java</h1>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">willprice</span><span class="o">.</span><span class="na">videolibrary</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Title</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">director</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">year</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Title</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">director</span><span class="o">,</span> <span class="n">String</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">director</span> <span class="o">=</span> <span class="n">director</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getDirector</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">director</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getYearOfRelease</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">year</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div>


<h1>The Homework: User stories, Acceptance tests, and CRC cards for an interesting problem</h1>

<p>Jason wants me to have ago applying the principles that we covered in the
pairing session on a different example, so I have free reign over what I want to
do. I'm quite interested in writing an app that allows users to track how often
they indulge in their vices. In my case: alcohol, I'd like to cut down on my
consumption, but I'm not quite sure how much I'm drinking, having an app to
record this information would be very helpful. Graphing it would be even more
helpful to see whether I'm decreasing my intake or not.</p>

    </div>
</div>

      </section>
    </div>
	</div><!-- container -->


<!-- End Document
================================================== -->
</body>
</html>
